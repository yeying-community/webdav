# Production Configuration

server:
  address: "0.0.0.0"
  port: 443
  tls: true
  cert_file: "/etc/webdav/certs/server.crt"
  key_file: "/etc/webdav/certs/server.key"
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s
  shutdown_timeout: 30s

database:
  type: "postgres"
  host: "postgres"  # Docker service name or hostname
  port: 5432
  database: "webdav"
  username: "webdav"
  password: "${WEBDAV_DB_PASSWORD}"  # From environment variable
  ssl_mode: "require"
  max_open_conns: 25
  max_idle_conns: 5
  max_lifetime: 5m

webdav:
  prefix: "/"
  directory: "/var/lib/webdav"
  no_sniff: true
  permissions: "R"

web3:
  jwt_secret: "${WEBDAV_JWT_SECRET}"  # From environment variable
  token_expiration: 12h
  refresh_token_expiration: 720h

security:
  no_password: false
  behind_proxy: true

cors:
  enabled: true
  credentials: true
  allowed_origins:
    - "https://your-domain.com"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
    - "PROPFIND"
    - "PROPPATCH"
    - "MKCOL"
    - "COPY"
    - "MOVE"
  allowed_headers:
    - "Authorization"
    - "Content-Type"
    - "Depth"
    - "Destination"
    - "Overwrite"
  exposed_headers:
    - "Content-Length"
    - "Content-Type"

log:
  level: "info"
  format: "json"
  colors: false
  outputs:
    - "/var/log/webdav/server.log"
users:
  # Users will be loaded from database in production
  # This section is only used for initial setup
  []
